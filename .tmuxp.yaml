session_name: myitjournal
global_options:
  automatic-rename: 'off'
start_directory: ./
windows:
- layout: main-horizontal
  options:
    main-pane-height: 90%
  window_name: myitjournal
  focus: true
  panes:
  - focus: true
    shell_command:
      - sleep 5 && open http://localhost:8000 && clear
      - lvim -O docs/ mkdocs.yml
  - shell_command:
    #- tmux resize-pane -t :.1 -y 8
    - conda env list 2>/dev/null | grep myitjournal >/dev/null 2>&1
      || conda env create -f environment.yml
    - conda activate myitjournal
    - mkdocs serve
